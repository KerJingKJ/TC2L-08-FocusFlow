{% extends 'homepage/base.html' %}

{% block title %}
Start Focus
{% endblock %}

{% block content %}
{% load static %}
<head>
    <link href="{% static 'goals/goals.css' %}" type="text/css" rel="stylesheet" />
    <link href="{% static 'playlist/playlist.css' %}" type="text/css" rel="stylesheet" />
    <title>Goals</title>
</head>

<body>
<div class='container-2'>
 <div class='container-time'>
    {% include 'timer/countdown.html' %}
    </div> 
    <div class='container-playlist'>
    {% include 'playlist/playlist.html' %}
    </div>
</div>
{% comment %} <form method="POST"> add id link htmx route{% endcomment %} 


<div class="container-aboutgoals">
    <div class="forms">
        <h1>Set your goals!</h1>
        <form method="POST">
            {% csrf_token %}
        <div class="title-container"><span><strong>Title:</strong>  {{ form.title }}</span></div>
        
        <div class="description">
            <p><strong>Description (if any): </strong></p>
            {{ form.description }}
        </div>
            <span><button type="submit" class="save">Save</button></span>
        </form>
    </div>

    <div class="yourgoals">
    <h2>Your Goals</h2>
<div id="set_goals">    
<div class='storedgoals'>    
    <div class="statusbarcontainer">
            {% if bar == 0 %}
            <span>0% of progress</span>
            {% else %}
            <div class="bar" style="width: {{ bar }}%;">
            <span>{{ bar|floatformat:1 }}% of progress</span>
            {% endif %}
            </div>
    </div>

    <div class="calculate">

        <div class="total">
        <span><strong>Total goals</strong></span>
        <span>{{total}}</span>
        </div>

        <div class="g-done">
        <span><strong>Goals completed<strong></span>
        <span>{{ done }}</span>
        </div>

        <div class="g-not">
        <span><strong>Goals not complete<strong></span>
        <span>{{ notdone }}<span>
        </div>
    </div>

    <div class="seperate">
        {% for goal in goals %}
        
        <div class="box">
            <span class="display_title"><strong>{{ goal.title }}</strong></span>
            <span class="display_description">{{ goal.description }}</span>
           
            <span>
            {% if not goal.completed %}    
                <div class="notdone">Progress: {{goal.progress}}</div>
                {% else %}
                <div class="done">Progress: {{goal.progress}}</div>
            </span>
            {% endif %}

            <div class="grouping">
            <a href="{% url 'edit' goal.id %}" class="edit">Edit</a>
            <a href="{% url 'delete' goal.id %}" class="delete">Delete</a>

            {% if not goal.completed %}
            <form action="{% url 'complete' goal.id 'complete'%}" method="POST">
                {% csrf_token %}
                <button type="submit" class="complete">Complete</button>
            </form>
            {% else %}
            <form action="{% url 'complete' goal.id 'notcomplete'%}" method="POST">
                {% csrf_token %}
                <button type="submit" class="complete">Incomplete</button>
            </form>
            {% endif %}
            
            </div>
        </div>
        {% endfor %}
        </div>
    </div>
    </div>
</div>
</div>

</body>

{% endblock %}

