<!-- mood_tracking.html -->
<h1>Mood Tracking</h1>


<form id="mood-form">
  <label for="mood">Current Mood:</label>
  <select id="mood" name="mood">
    {% for mood in mood_choices %}
    <option value="{{ mood }}">{{ mood }}</option>
    {% endfor %}
  </select>
  <br>
  <label for="notes">Notes:</label>
  <textarea id="notes" name="notes"></textarea>
  <br>
  <button type="submit">Log Mood</button>
</form>

<div id="mood-graph">
  <!-- This could be a chart or graph showing the user's mood over time -->
</div>

<script>
  const form = document.getElementById('mood-form');
  const moodGraph = document.getElementById('mood-graph');

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const mood = document.getElementById('mood').value;
    const notes = document.getElementById('notes').value;
    // Send the data to the server to log the mood
    fetch('{% url "log_mood" %}', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ mood, notes }),
    })
      .then((response) => response.json())
      .then((data) => {
        // Update the mood graph with the new data
        updateMoodGraph(data);
      })
      .catch((error) => console.error(error));
  });

  function updateMoodGraph(data) {
    // This function would update the mood graph with the new data
    // For example, you could use a library like Chart.js to create a chart
    const chart = new Chart(moodGraph, {
      type: 'line',
      data: {
        labels: data.labels,
        datasets: [{
          label: 'Mood',
          data: data.values,
          backgroundColor: 'rgba(255, 99, 132, 0.2)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1,
        }],
      },
      options: {
        scales: {
          y: {
            beginAtZero: true,
          },
        },
      },
    });
  }
</script>

<div class="mood-tracking-container"></div>
  <h1>Mood Tracking</h1>
  <div class="chart-container">
    <canvas id="mood-chart"></canvas>
  </div>
  <div class="stats-container">
    <p>Average Mood: <span class="average-mood">Neutral</span></p>
    <p>Most Common Mood: <span class="most-common-mood">Happy</span></p>
  </div>
</div>

